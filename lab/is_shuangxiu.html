<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<title>是否是双休</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
	body
	{
		font-family: 'Microsoft Yahei';
		font-size: 16px;
	}
	#result
	{
		font-size: 1.4em;
		margin: 0 10px;
		font-weight: bold;
	}
	</style>
</head>
<body>
	<input type="date" id="date_select" onchange="changeDate()"/>&nbsp;&nbsp;是<span id="result"></span>
	<script type="text/javascript">

	var xat =
	{
		/**
		 * 与日期相关的方法，add by lxa 20140424
		 */
		date:
		{
			/**
			 * 判断某一年是否是闰年
			 */
			isLeapYear:function(year)
			{
				if(year===undefined)
					year=new Date();
				if(year instanceof Date)
					year=year.getFullYear();
				return (year%4==0&&year%100!=0)||(year%400==0);
			},
			/**
			 * 将日期格式化成指定格式的字符串
			 * @param fmt 要格式化目标字符串，示例：yyyy-MM-dd www HH:mm:ss
			 * @param date 要格式化的日期，不传时默认当前时间
			 * @returns 返回格式化后的日期字符串
			 */
			format: function(fmt, date)
			{
				fmt = fmt || 'yyyy-MM-dd www HH:mm:ss:SSS';
				date = date === undefined ? new Date() : date;
				var obj =
				{
					'y': date.getFullYear(),//年份，注意必须用getFullYear
					'M': date.getMonth()+1,//月份，注意是从0-11
					'd': date.getDate(),//日期
					"q": Math.floor((date.getMonth()+3)/3),//季度
					'w': date.getDay(),//星期，注意是0-6
					'H': date.getHours(),//24小时制
					'h': date.getHours()%12==0?12:date.getHours()%12,//12小时制
					'm': date.getMinutes(),//分钟
					's': date.getSeconds(),//秒
					'S': date.getMilliseconds()//毫秒
				};
				var week = ['天', '一', '二', '三', '四', '五', '六'];
				for(var i in obj)
				{
					fmt = fmt.replace(eval('/'+i+'+/g'), function(m)
					{
						var val = obj[i] + '';
						if(i == 'w')
							return (m.length>2?'星期':'周') + week[val];
						for(var j=0, len=val.length; j<m.length-len; j++)
							val = '0' + val;
						return m.length==1 ? val : val.substring(val.length-m.length);
					});
				}
				return fmt;
			},
			/**
			 * 将字符串转换成日期，标清机顶盒不支持，请慎用！
			 * @param str 输入的日期字符串，如'2014-09-13'
			 * @param fmt 字符串格式，默认'yyyy-MM-dd'，支持如下：y、M、d、H、m、s、S
			 * @returns 解析后的Date类型日期
			 */
			parse: function(str,fmt)
			{
				//Date初始化有6种重载，这里只考虑后面4种：
				//new Date("month dd,yyyy hh:mm:ss");
				//new Date("month dd,yyyy");
				//new Date(y,M,d,H,m,s);
				//new Date(y,M,d);
				//new Date(S);
				//new Date();
				fmt=fmt||'yyyy-MM-dd';
				str=str||'2014-4-11';
				var obj={y:0,M:1,d:0,H:0,h:0,m:0,s:0,S:0};
				fmt.replace(/([^yMdHmsS]?)([yMdHmsS])\2*([^yMdHmsS]?)/g,function(m,$1,$2,$3,idx,old)
				{
				    str=str.replace(eval('/'+($1||'^')+'([^'+($3||'$')+']+?)'+($3||'$')+'/'),function(){return '';});
				    obj[$2]=parseInt(RegExp.$1);
				    return "$";
				});
				obj.M--;//月份是从0开始的，所以要减去1
				var date=new Date(obj.y,obj.M,obj.d,obj.H,obj.m,obj.s);
				if(obj.S!==0)//如果设置了毫秒
					date.setMilliseconds(obj.S); 
				return date;
			},
			/**
			 * 获取某一年某一月的总天数，没有任何参数时获取当前月份的
			 * 方式一：$.getMonthDays();
			 * 方式二：$.getMonthDays(new Date());
			 * 方式三：$.getMonthDays(2013,12);
			 */
			getMonthDays:function(date,month)
			{
				var y,m;
				if(date==undefined)
					date=new Date();
				if(date instanceof Date)
				{
					y=date.getFullYear();
					m=date.getMonth();
				}
				else if(typeof date==='number')
				{
					y=date;
					m=month-1;
				}
				var days=[31,28,31,30,31,30,31,31,30,31,30,31];
				if(m==1&&this.isLeapYear(y)) //如果是闰年并且是2月
					return days[m]+1;
				return days[m];
			},
			/**
			 * 计算2日期之间的天数，即date1-date2
			 */
			countDays:function(date1,date2,fmt)
			{
				if(typeof date1==='string'&&typeof date2==='string')
				{
					fmt=fmt||'yyyy-MM-dd';
					date1=this.parse(date1,fmt);
					date2=this.parse(date2,fmt);
				}
				var swap=this.before(date1,date2);//是否需要交换
				if(swap)//如果date1比date2小，交换二者
				{
					var t=date1;
					date1=date2;
					date2=t;
				}
				var days=0;
				for(var i=date2.getFullYear();i<date1.getFullYear();i++)
					days+=(this.isLeapYear(i)?366:365);
				for(var i=0;i<date1.getMonth();i++)
					days+=this.getMonthDays(date1.getFullYear(),i+1);
				days+=date1.getDate();//至此，计算出(date2)年1月1日到date1的天数
				var remove=0;//需要减去的天数，即(date2)年1月1日到date2的天数
				for(var i=0;i<date2.getMonth();i++)
					remove+=this.getMonthDays(date1.getFullYear(),i+1);
				remove+=date2.getDate();
				return swap?(remove-days):(days-remove);
			},
			/**
			 * 计算2日期之间的天数，用的是比较毫秒数的方法，此方法备用
			 */
			countDays2:function(date1,date2,fmt)
			{
				if(typeof date1==='string'&&typeof date2==='string')
				{
					fmt=fmt||'yyyy-MM-dd';
					date1=this.parse(date1,fmt);
					date2=this.parse(date2,fmt);
				}
				var days=0;
				return (date1.getTime()-date2.getTime())/(1000*60*60*24);
			},
			/**
			 * 判断date1是否在date2之后
			 */
			after:function(date1,date2)
			{
				return (date1.getTime()-date2.getTime())>0;
			},
			/**
			 * 判断date1是否在date2之前
			 */
			before:function(date1,date2)
			{
				return (date1.getTime()-date2.getTime())<0;
			},
			/**
			 * 判断某一周是不是双休
			 */
			isShuangxiu:function(date)
			{
				var base='2014-04-14';//某一个双休的周一
				var days=this.countDays(date,base);
				return Math.floor(days/7)%2==0;
			}
		}
	};
	function changeDate()
	{
		var flag = xat.date.isShuangxiu(document.getElementById('date_select').value);
		document.getElementById('result').innerHTML = flag?'双休':'单休';
		document.getElementById('result').style.color = flag?'green':'red';
	}
	document.getElementById('date_select').value = xat.date.format('yyyy-MM-dd');
	changeDate();
	</script>
</body>
</html>
